\hypertarget{sd__diskio_8c}{}\doxysection{Src/sd\+\_\+diskio.c File Reference}
\label{sd__diskio_8c}\index{Src/sd\_diskio.c@{Src/sd\_diskio.c}}


SD Disk I/O driver.  


{\ttfamily \#include \char`\"{}ff\+\_\+gen\+\_\+drv.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}sd\+\_\+diskio.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_a142810068f1b99cd93d3fc9f0e160e02}{Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE}}~(uint32\+\_\+t) 10
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_ad2cc981dbb8705da878c9c8fd510647b}{R\+E\+A\+D\+\_\+\+C\+P\+L\+T\+\_\+\+M\+SG}}~(uint32\+\_\+t) 1
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_ae387182dbdbb4c60396d9f6ac7958340}{W\+R\+I\+T\+E\+\_\+\+C\+P\+L\+T\+\_\+\+M\+SG}}~(uint32\+\_\+t) 2
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}{S\+D\+\_\+\+T\+I\+M\+E\+O\+UT}}~30 $\ast$ 1000
\item 
\#define \mbox{\hyperlink{sd__diskio_8c_ae38517ff312078360458aa555211e1df}{S\+D\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+I\+ZE}}~512
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{D\+S\+T\+A\+T\+US}} \mbox{\hyperlink{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}{S\+D\+\_\+initialize}} (\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}} lun)
\begin{DoxyCompactList}\small\item\em Initializes a Drive. \end{DoxyCompactList}\item 
\mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{D\+S\+T\+A\+T\+US}} \mbox{\hyperlink{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}{S\+D\+\_\+status}} (\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}} lun)
\begin{DoxyCompactList}\small\item\em Gets Disk Status. \end{DoxyCompactList}\item 
\mbox{\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{D\+R\+E\+S\+U\+LT}} \mbox{\hyperlink{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}{S\+D\+\_\+read}} (\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}} lun, \mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}} $\ast$buff, \mbox{\hyperlink{integer_8h_ad342ac907eb044443153a22f964bf0af}{D\+W\+O\+RD}} sector, \mbox{\hyperlink{integer_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}} count)
\begin{DoxyCompactList}\small\item\em Reads Sector(s) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}{B\+S\+P\+\_\+\+S\+D\+\_\+\+Write\+Cplt\+Callback}} (void)
\begin{DoxyCompactList}\small\item\em Writes Sector(s) \end{DoxyCompactList}\item 
void \mbox{\hyperlink{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}{B\+S\+P\+\_\+\+S\+D\+\_\+\+Read\+Cplt\+Callback}} (void)
\begin{DoxyCompactList}\small\item\em Rx Transfer completed callbacks. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const \mbox{\hyperlink{struct_diskio__drv_type_def}{Diskio\+\_\+drv\+Type\+Def}} \mbox{\hyperlink{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}{S\+D\+\_\+\+Driver}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
SD Disk I/O driver. 

\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\doxysubsubsection*{\begin{center}\copyright{} Copyright (c) 2020 S\+T\+Microelectronics. All rights reserved.\end{center} }

This software component is licensed by ST under Ultimate Liberty license S\+L\+A0044, the \char`\"{}\+License\char`\"{}; You may not use this file except in compliance with the License. You may obtain a copy of the License at\+: www.\+st.\+com/\+S\+L\+A0044 

\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{sd__diskio_8c_a142810068f1b99cd93d3fc9f0e160e02}\label{sd__diskio_8c_a142810068f1b99cd93d3fc9f0e160e02}} 
\index{sd\_diskio.c@{sd\_diskio.c}!QUEUE\_SIZE@{QUEUE\_SIZE}}
\index{QUEUE\_SIZE@{QUEUE\_SIZE}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{QUEUE\_SIZE}{QUEUE\_SIZE}}
{\footnotesize\ttfamily \#define Q\+U\+E\+U\+E\+\_\+\+S\+I\+ZE~(uint32\+\_\+t) 10}



Definition at line 38 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_ad2cc981dbb8705da878c9c8fd510647b}\label{sd__diskio_8c_ad2cc981dbb8705da878c9c8fd510647b}} 
\index{sd\_diskio.c@{sd\_diskio.c}!READ\_CPLT\_MSG@{READ\_CPLT\_MSG}}
\index{READ\_CPLT\_MSG@{READ\_CPLT\_MSG}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{READ\_CPLT\_MSG}{READ\_CPLT\_MSG}}
{\footnotesize\ttfamily \#define R\+E\+A\+D\+\_\+\+C\+P\+L\+T\+\_\+\+M\+SG~(uint32\+\_\+t) 1}



Definition at line 39 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_ae38517ff312078360458aa555211e1df}\label{sd__diskio_8c_ae38517ff312078360458aa555211e1df}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_DEFAULT\_BLOCK\_SIZE@{SD\_DEFAULT\_BLOCK\_SIZE}}
\index{SD\_DEFAULT\_BLOCK\_SIZE@{SD\_DEFAULT\_BLOCK\_SIZE}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_DEFAULT\_BLOCK\_SIZE}{SD\_DEFAULT\_BLOCK\_SIZE}}
{\footnotesize\ttfamily \#define S\+D\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+B\+L\+O\+C\+K\+\_\+\+S\+I\+ZE~512}



Definition at line 60 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}\label{sd__diskio_8c_a28be5b4ad518f3d24d247e50f0385a9b}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_TIMEOUT@{SD\_TIMEOUT}}
\index{SD\_TIMEOUT@{SD\_TIMEOUT}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_TIMEOUT}{SD\_TIMEOUT}}
{\footnotesize\ttfamily \#define S\+D\+\_\+\+T\+I\+M\+E\+O\+UT~30 $\ast$ 1000}



Definition at line 58 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_ae387182dbdbb4c60396d9f6ac7958340}\label{sd__diskio_8c_ae387182dbdbb4c60396d9f6ac7958340}} 
\index{sd\_diskio.c@{sd\_diskio.c}!WRITE\_CPLT\_MSG@{WRITE\_CPLT\_MSG}}
\index{WRITE\_CPLT\_MSG@{WRITE\_CPLT\_MSG}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{WRITE\_CPLT\_MSG}{WRITE\_CPLT\_MSG}}
{\footnotesize\ttfamily \#define W\+R\+I\+T\+E\+\_\+\+C\+P\+L\+T\+\_\+\+M\+SG~(uint32\+\_\+t) 2}



Definition at line 40 of file sd\+\_\+diskio.\+c.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}\label{sd__diskio_8c_a8d66ac35cee6a454f7e584f0051bc9f8}} 
\index{sd\_diskio.c@{sd\_diskio.c}!BSP\_SD\_ReadCpltCallback@{BSP\_SD\_ReadCpltCallback}}
\index{BSP\_SD\_ReadCpltCallback@{BSP\_SD\_ReadCpltCallback}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{BSP\_SD\_ReadCpltCallback()}{BSP\_SD\_ReadCpltCallback()}}
{\footnotesize\ttfamily void B\+S\+P\+\_\+\+S\+D\+\_\+\+Read\+Cplt\+Callback (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Rx Transfer completed callbacks. 

B\+SP Rx Transfer completed callback.


\begin{DoxyParams}{Parameters}
{\em hsd} & SD handle \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 653 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}\label{sd__diskio_8c_afc4f1ecdf361e0c0808803167f31d61b}} 
\index{sd\_diskio.c@{sd\_diskio.c}!BSP\_SD\_WriteCpltCallback@{BSP\_SD\_WriteCpltCallback}}
\index{BSP\_SD\_WriteCpltCallback@{BSP\_SD\_WriteCpltCallback}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{BSP\_SD\_WriteCpltCallback()}{BSP\_SD\_WriteCpltCallback()}}
{\footnotesize\ttfamily void B\+S\+P\+\_\+\+S\+D\+\_\+\+Write\+Cplt\+Callback (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Writes Sector(s) 

B\+SP Tx Transfer completed callback.


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
{\em $\ast$buff} & Data to be written \\
\hline
{\em sector} & Sector address (L\+BA) \\
\hline
{\em count} & Number of sectors to write (1..128) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em D\+R\+E\+S\+U\+LT} & Operation result\\
\hline
\end{DoxyRetVals}
I/O control operation 
\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
{\em cmd} & Control code \\
\hline
{\em $\ast$buff} & Buffer to send/receive control data \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em D\+R\+E\+S\+U\+LT} & Operation result\\
\hline
\end{DoxyRetVals}
Tx Transfer completed callbacks 
\begin{DoxyParams}{Parameters}
{\em hsd} & SD handle \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em None} & \\
\hline
\end{DoxyRetVals}


Definition at line 633 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}\label{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_initialize@{SD\_initialize}}
\index{SD\_initialize@{SD\_initialize}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_initialize()}{SD\_initialize()}}
{\footnotesize\ttfamily \mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{D\+S\+T\+A\+T\+US}} S\+D\+\_\+initialize (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}}}]{lun }\end{DoxyParamCaption})}



Initializes a Drive. 


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em D\+S\+T\+A\+T\+US} & Operation status \\
\hline
\end{DoxyRetVals}


Definition at line 177 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}\label{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_read@{SD\_read}}
\index{SD\_read@{SD\_read}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_read()}{SD\_read()}}
{\footnotesize\ttfamily \mbox{\hyperlink{diskio_8h_aacdfef1dad6565f65c26d12fe0ea4b2b}{D\+R\+E\+S\+U\+LT}} S\+D\+\_\+read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}}}]{lun,  }\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}} $\ast$}]{buff,  }\item[{\mbox{\hyperlink{integer_8h_ad342ac907eb044443153a22f964bf0af}{D\+W\+O\+RD}}}]{sector,  }\item[{\mbox{\hyperlink{integer_8h_a36cb3b01d81ffd844bbbfb54003e06ec}{U\+I\+NT}}}]{count }\end{DoxyParamCaption})}



Reads Sector(s) 


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
{\em $\ast$buff} & Data buffer to store read data \\
\hline
{\em sector} & Sector address (L\+BA) \\
\hline
{\em count} & Number of sectors to read (1..128) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em D\+R\+E\+S\+U\+LT} & Operation result \\
\hline
\end{DoxyRetVals}


Definition at line 251 of file sd\+\_\+diskio.\+c.

\mbox{\Hypertarget{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}\label{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_status@{SD\_status}}
\index{SD\_status@{SD\_status}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_status()}{SD\_status()}}
{\footnotesize\ttfamily \mbox{\hyperlink{diskio_8h_adba6790898ce4029c20a34b898ce73c1}{D\+S\+T\+A\+T\+US}} S\+D\+\_\+status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{integer_8h_a4ae1dab0fb4b072a66584546209e7d58}{B\+Y\+TE}}}]{lun }\end{DoxyParamCaption})}



Gets Disk Status. 


\begin{DoxyParams}{Parameters}
{\em lun} & \+: not used \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em D\+S\+T\+A\+T\+US} & Operation status \\
\hline
\end{DoxyRetVals}


Definition at line 234 of file sd\+\_\+diskio.\+c.



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}\label{sd__diskio_8c_a1a12762eb7b74c246045197fa41f1296}} 
\index{sd\_diskio.c@{sd\_diskio.c}!SD\_Driver@{SD\_Driver}}
\index{SD\_Driver@{SD\_Driver}!sd\_diskio.c@{sd\_diskio.c}}
\doxysubsubsection{\texorpdfstring{SD\_Driver}{SD\_Driver}}
{\footnotesize\ttfamily const \mbox{\hyperlink{struct_diskio__drv_type_def}{Diskio\+\_\+drv\+Type\+Def}} S\+D\+\_\+\+Driver}

{\bfseries Initial value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{=}
\DoxyCodeLine{\{}
\DoxyCodeLine{  \mbox{\hyperlink{sd__diskio_8c_aad7ae36100f45de75e573a0f5fd3addd}{SD\_initialize}},}
\DoxyCodeLine{  \mbox{\hyperlink{sd__diskio_8c_a21ca54e56dca1f40b54f458ac35470e3}{SD\_status}},}
\DoxyCodeLine{  \mbox{\hyperlink{sd__diskio_8c_a1f2ee4a775d8a3877f368533db97cbe4}{SD\_read}},}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{ }
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{}
\DoxyCodeLine{ }
\DoxyCodeLine{\}}

\end{DoxyCode}


Definition at line 119 of file sd\+\_\+diskio.\+c.

